{% load humanize %}

<tr class="item-row">

  <td>
    <input type="text"
           class="form-control form-control-sm stock-search mb-1"
           placeholder="Tìm sản phẩm...">

    <select name="items-__prefix__-stock_item"
            class="form-select stock-select">
      <option value="">--------</option>

      {% for s in stock_queryset %}
      <option value="{{ s.pk }}"
              data-text="{{ s.product.name|lower }}"
              data-quantity="{{ s.quantity }}"
              data-unit-price="{{ s.unit_price }}"
              data-display-price="{{ s.unit_price }}"
              data-unit="{{ s.unit }}"
              data-status="{{ s.status }}"
              data-expiry="{{ s.expiry_date|date:'Y-m-d' }}">
        {{ s.product.name }} - SL: {{ s.quantity }}
      </option>
      {% endfor %}
    </select>
  </td>

  <td>
    <input type="number"
           name="items-__prefix__-quantity"
           class="form-control text-end quantity"
           min="1"
           value="0">
  </td>

  <td>
    <input type="text"
           name="items-__prefix__-unit_price"
           class="form-control text-end unit-price"
           readonly
           value="0">
  </td>

  <td>
    <input type="number"
           name="items-__prefix__-discount_percent"
           class="form-control text-end discount"
           min="0" step="0.01"
           value="0">
  </td>

  <td>
    <input type="text"
           name="items-__prefix__-unit"
           class="form-control unit-field"
           readonly>
  </td>

  <td class="text-end total-cell text-primary fw-semibold">0 ₫</td>

  <input type="hidden"
         name="items-__prefix__-total"
         class="total-input"
         value="0">

  <td class="text-center">
    <input type="checkbox" name="items-__prefix__-DELETE">
  </td>

</tr>
